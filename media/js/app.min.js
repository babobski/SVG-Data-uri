const vscode=acquireVsCodeApi(),App={init:()=>{document.getElementById("input").focus(),document.getElementById("get_result").addEventListener("click",App.svgToDataUri),document.getElementById("input").addEventListener("input",App.svgToDataUri)},svgToDataUri:()=>{const input=document.getElementById("input"),output=document.getElementById("output"),val=input.value.replace(/(width="[^"]*"|height="[^"]*")/g,""),quotes=App.getQuotes(),namespaced=App.addNameSpace(val),escaped=App.encodeSVG(namespaced),result=`${quotes.level1}data:image/svg+xml,${escaped}${quotes.level1}`;output.value=result,vscode.postMessage({command:"copy_result",text:result})},getQuotes:()=>{const double='"',single="'";return{level1:"'",level2:'"'}},encodeSVG:data=>{const symbols=/[\r\n%#()<>?[\\\]^`{|}]/g;return(data=(data=(data=data.replace(/'/g,'"')).replace(/>\s{1,}</g,"><")).replace(/\s{2,}/g," ")).replace(symbols,encodeURIComponent)},addNameSpace:data=>(data.indexOf("http://www.w3.org/2000/svg")<0&&(data=data.replace(/<svg/g,`<svg xmlns=${quotes.level2}http://www.w3.org/2000/svg${quotes.level2}`)),data)};window.addEventListener("DOMContentLoaded",App.init);